
    % Knowledge Base per Monitoraggio del Sistema

    % Fatti
    % giocatore/4 - Rappresenta un giocatore assegnato a una partita
    % Parametri: ID del giocatore, ID della partita, Classe del giocatore, Tempo di attesa
    % Esempio: giocatore(g1, m1, 0, 15).
    
    % partita/3 - Rappresenta lo stato di una partita
    % Parametri: ID della partita, Numero di giocatori, Classe della partita
    % Esempio: partita(m1, 4, 0).
    giocatore(g2, m3, 0, 12).
giocatore(g3, m9, 0, 13).
giocatore(g4, m0, 1, 12).
giocatore(g6, m8, 1, 12).
giocatore(g12, m12, 1, 14).
giocatore(g13, m10, 2, 14).
giocatore(g15, m5, 1, 12).
giocatore(g17, m6, 1, 12).
giocatore(g18, m6, 1, 20).
giocatore(g23, m7, 1, 14).
giocatore(g24, m3, 0, 16).
giocatore(g25, m8, 1, 13).
giocatore(g31, m6, 1, 24).
giocatore(g34, m2, 1, 15).
giocatore(g35, m10, 2, 14).
giocatore(g37, m6, 1, 11).
giocatore(g40, m6, 1, 12).
giocatore(g42, m2, 1, 18).
giocatore(g44, m5, 1, 20).
giocatore(g47, m12, 1, 14).
giocatore(g49, m0, 1, 16).
giocatore(g50, m7, 1, 13).
giocatore(g54, m7, 1, 15).
giocatore(g57, m10, 2, 15).
giocatore(g61, m11, 0, 16).
giocatore(g64, m4, 0, 17).
giocatore(g68, m10, 2, 24).
giocatore(g70, m3, 0, 11).
giocatore(g74, m4, 0, 14).
giocatore(g77, m2, 1, 10).
giocatore(g79, m2, 1, 13).
giocatore(g80, m4, 0, 19).
giocatore(g82, m9, 0, 17).
giocatore(g84, m3, 0, 13).
giocatore(g86, m8, 1, 19).
giocatore(g90, m10, 2, 14).
giocatore(g91, m6, 1, 13).
giocatore(g94, m3, 0, 19).
giocatore(g95, m11, 0, 19).
giocatore(g99, m4, 0, 15).
giocatore(g101, m8, 1, 20).
giocatore(g102, m2, 1, 17).
giocatore(g104, m6, 1, 11).
giocatore(g107, m3, 0, 18).
giocatore(g109, m9, 0, 13).
giocatore(g110, m1, 1, 23).
giocatore(g114, m1, 1, 12).
giocatore(g115, m0, 1, 20).
giocatore(g118, m7, 1, 13).
giocatore(g119, m11, 0, 12).
giocatore(g120, m9, 0, 10).
giocatore(g121, m8, 1, 11).
giocatore(g122, m1, 1, 11).
giocatore(g124, m8, 1, 16).
giocatore(g125, m3, 0, 14).
giocatore(g127, m5, 1, 15).
giocatore(g131, m1, 1, 15).
giocatore(g132, m1, 1, 13).
giocatore(g143, m12, 1, 12).
giocatore(g145, m12, 1, 14).
giocatore(g151, m11, 0, 9).
giocatore(g156, m12, 1, 14).
giocatore(g159, m4, 0, 15).
giocatore(g160, m0, 1, 22).
giocatore(g164, m5, 1, 12).
giocatore(g167, m1, 1, 21).
giocatore(g169, m3, 0, 12).
giocatore(g172, m9, 0, 14).
giocatore(g177, m1, 1, 18).
giocatore(g183, m11, 0, 17).
giocatore(g185, m12, 1, 17).
giocatore(g186, m11, 0, 16).
giocatore(g190, m0, 1, 15).
giocatore(g193, m5, 1, 16).
giocatore(g194, m0, 1, 12).
giocatore(g197, m8, 1, 14).
giocatore(g201, m10, 2, 15).
giocatore(g203, m4, 0, 16).
giocatore(g205, m1, 1, 17).
giocatore(g206, m6, 1, 19).
giocatore(g207, m7, 1, 11).
giocatore(g209, m11, 0, 11).
giocatore(g211, m5, 1, 14).
giocatore(g212, m10, 2, 12).
giocatore(g216, m10, 2, 16).
giocatore(g225, m5, 1, 19).
giocatore(g227, m2, 1, 20).
giocatore(g228, m7, 1, 12).
giocatore(g229, m11, 0, 8).
giocatore(g230, m12, 1, 18).
giocatore(g231, m2, 1, 17).
giocatore(g233, m8, 1, 11).
giocatore(g234, m2, 1, 12).
giocatore(g236, m7, 1, 14).
giocatore(g239, m0, 1, 15).
giocatore(g243, m9, 0, 13).
giocatore(g247, m4, 0, 18).
giocatore(g249, m5, 1, 13).
giocatore(g251, m4, 0, 15).
giocatore(g252, m12, 1, 19).
giocatore(g253, m0, 1, 21).
giocatore(g258, m9, 0, 14).
giocatore(g263, m9, 0, 11).
giocatore(g264, m7, 1, 15).
partita(m0, 8, 1).
partita(m1, 8, 1).
partita(m2, 8, 1).
partita(m3, 8, 0).
partita(m4, 8, 0).
partita(m5, 8, 1).
partita(m6, 8, 1).
partita(m7, 8, 1).
partita(m8, 8, 1).
partita(m9, 8, 0).
partita(m10, 8, 2).
partita(m11, 8, 0).
partita(m12, 8, 1).

    % Regole

    % partita_piena/1 - Verifica se una partita ha raggiunto la capacità massima
    partita_piena(PartitaID) :- partita(PartitaID, NumeroGiocatori, Classe), NumeroGiocatori >= 8.

    % sistema_pieno/0 - Determina se il sistema è vicino alla saturazione
    sistema_pieno :- findall(PartitaID, partita_piena(PartitaID), ListaPartitePiene), 
                     length(ListaPartitePiene, NumeroPartitePiene), NumeroPartitePiene >= 7.8.

    % partita_non_uniforme/1 - Identifica partite con giocatori di classi diverse
    partita_non_uniforme(PartitaID) :-
        partita(PartitaID, _, Classe),
        giocatore(_, PartitaID, ClasseGiocatore, _),
        Classe \= ClasseGiocatore.
    